{% extends 'nav.html' %}
{% load staticfiles %}
{% block css %}
    <link rel="stylesheet" href="/static/layui/css/layui.css">
{% endblock %}

{% block content %}
    <div style="padding: 20px; background-color: #F2F2F2;">
        <div class="layui-row layui-col-space15" id="imagelist">
            <!-- 每个公有镜像卡片-->
<!--
            <div class="layui-col-md3">
                <div class="layui-card">
                    <div class="layui-card-header">tomcat</div>
                    <div class="layui-card-body">
                        卡片式面板面板通常用于非白色背景色的主体内,从而映衬出边框投影,卡片式面板面板通常用于非白色背景色的主体内,从而映衬出边框投影
                    </div>
                </div>
            </div>
-->
        </div>
    </div>
{% endblock %}

{% block script%}
    <script>
        layui.use(['table', 'jquery', 'layer', 'form', 'laypage'], function () {
            var table = layui.table,
                layer = layui.layer,
                form = layui.form,
                $ = layui.jquery,
                laypage = layui.laypage;

            //不显示首页尾页
            {#laypage.render({#}
            {#    elem: 'imagelist',#}
            {#    page: true,#}
            {#    limit: 12,#}
            {#    first: false,#}
            {#    last: false,#}
            {#    jump: function(obj, first) {#}
            {#        //obj包含了当前分页的所有参数，比如：#}
            {#        console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。#}
            {#        console.log(obj.limit); //得到每页显示的条数#}
            {##}
            {#        //首次不执行#}
            {#        if (!first) {#}
            {#            //do something#}
            {#        }#}
            {#    }#}
            {#})#}
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function() {
            $.ajax({
                url: '{% url 'repository:get_repositorypublist'%}',
                type: 'GET',
                dataType: 'json',
                success: function (result) {
                    if (result != null || result != '') {
                        var total = result.total,
                            images = result.data,
                            imageDiv = $('#imagelist');
                        $.each(images, function (index, data) {
                            var imageOption = $("<div class='layui-col-md3'><div class='layui-card'><div class='layui-card-header'>" +
                                data.repository + "</div><div class='layui-card-body' style='height:185px; overflow: hidden; text-overflow: ellipsis;'>" +
                                data.desc + "</div></div></div>")
                            imageDiv.append(imageOption)
                        })

                    }else{

                    }
                }
            })
        })
    </script>
{% endblock %}